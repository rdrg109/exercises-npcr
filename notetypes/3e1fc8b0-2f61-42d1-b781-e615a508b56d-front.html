<my-anki-field name="identifier">{{identifier}}</my-anki-field>
<my-anki-field name="exercise-number">{{exercise number}}</my-anki-field>
<my-anki-field name="sentence-with-gaps">{{sentence with gaps}}</my-anki-field>
<my-anki-field name="newly-reviewed-word">{{newly reviewed word}}</my-anki-field>
<my-anki-field name="additional-word">{{additional word}}</my-anki-field>
<my-anki-field name="answer-1-part-1">{{answer 1 part 1}}</my-anki-field>
<my-anki-field name="answer-1-part-2">{{answer 1 part 2}}</my-anki-field>
<my-anki-field name="answer-2-part-1">{{answer 2 part 1}}</my-anki-field>
<my-anki-field name="answer-2-part-2">{{answer 2 part 2}}</my-anki-field>

<style>
  @import url('exercises.css');

  .card {
    font-family: arial;
    font-size: 20px;
    text-align: center;
    color: black;
    background-color: white;
  }

  #exercise-container {
    width: 80%;
    border: 1px solid black;
    margin: auto;
    text-align: left;
    padding: 10px;
  }

  #sentence {
    display: inline-block;
  }

  #exercise-number {
    display: inline-block;
  }

  #exercise-number:after {
    content: '. ';
  }

  #newly-reviewed-word {
    color: green;
    text-align: left;
  }

  #additional-word {
    text-align: right;
  }
  #additional-word:before {content: 'ï¼ˆ';}
  #additional-word:after {content: 'ï¼‰';}
</style>

<script src="anki-persistence-v1.1.8-minified.js"></script>
<script src="exercises.js"></script>
<script>
  var data = getAllAnkiFields()
  var parent = document.getElementById('qa')

  var identifier = document.createElement('div')
  identifier.textContent = 'Exercise ID: ' + data['identifier']
  identifier.classList.add('exercises-exercise-identifier')

  var exerciseNumber = document.createElement('div')
  exerciseNumber.textContent = data['exercise-number']
  exerciseNumber.id = 'exercise-number'

  var sentence = document.createElement('div')
  sentence.id = 'sentence'
  var counter = 1
  sentence.innerHTML = data['sentence-with-gaps'].replace(/ðŸŸ¦/g, () => {
    var node = document.createElement('input')
    node.type = 'text'
    node.id = 'input-' + counter
    node.classList.add('exercises-inline-input-text-for-a-single-word')
    counter = counter + 1
    return node.outerHTML
  })

  var exerciseContainer = document.createElement('div')
  exerciseContainer.id = 'exercise-container'

  var instruction = document.createElement('div')
  instruction.textContent = 'Completa las siguientes oraciones con las palabras dadas.'

  var newlyReviewedWord = document.createElement('div')
  newlyReviewedWord.textContent = data['newly-reviewed-word']
  newlyReviewedWord.id = 'newly-reviewed-word'

  var optionalWord = document.createElement('div')
  optionalWord.textContent = data['additional-word']
  optionalWord.id = 'additional-word'

  exerciseContainer.appendChild(instruction)
  exerciseContainer.appendChild(newlyReviewedWord)
  exerciseContainer.appendChild(exerciseNumber)
  exerciseContainer.appendChild(sentence)
  exerciseContainer.appendChild(optionalWord)

  parent.appendChild(identifier)
  parent.appendChild(exerciseContainer)

  var nodes = document.querySelectorAll('input')
  for(const node of nodes) {
    addEventListenersToInputTextWhenInput([node.id])
  }
</script>
